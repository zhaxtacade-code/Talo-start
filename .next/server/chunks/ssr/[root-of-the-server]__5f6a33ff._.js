module.exports=[21113,(a,b,c)=>{"use strict";b.exports=a.r(68126).vendored["react-ssr"].React},26451,(a,b,c)=>{"use strict";b.exports=a.r(68126).vendored["react-ssr"].ReactDOM},81529,(a,b,c)=>{"use strict";b.exports=a.r(68126).vendored.contexts.AppRouterContext},66401,(a,b,c)=>{"use strict";b.exports=a.r(68126).vendored["react-ssr"].ReactServerDOMTurbopackClient},10519,(a,b,c)=>{"use strict";b.exports=a.r(68126).vendored.contexts.HooksClientContext},7677,(a,b,c)=>{"use strict";b.exports=a.r(68126).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},68126,(a,b,c)=>{"use strict";b.exports=a.r(18622)},95526,(a,b,c)=>{"use strict";b.exports=a.r(68126).vendored["react-ssr"].ReactJsxRuntime},25322,a=>{"use strict";var b=a.i(95526),c=a.i(21113);function d(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),s=(0,c.useRef)(null),t=a=>{};(0,c.useEffect)(()=>{h(!1),f(!0),v()},[]);let u=(0,c.useMemo)(()=>({}),[g]),v=async()=>{try{let a=await fetch("/api/water-orders");if(!a.ok)throw Error("api");let b=await a.json();d(b),t(b)}catch{d([])}},w=async b=>{if(b.preventDefault(),g&&i&&m){if((await fetch("/api/water-orders",{method:"POST",headers:{"Content-Type":"application/json",...u},body:JSON.stringify({product:i,quantity:k,pricePerUnit:m,deliveryDate:o,notes:q})})).ok)await v();else{let b=[...a,{id:Date.now().toString(),product:i,quantity:k,pricePerUnit:m,deliveryDate:o,notes:q}];d(b),t(b)}j(""),l(""),n(""),p(""),r("")}},x=async b=>{if(g)if((await fetch(`/api/water-orders/${b}`,{method:"DELETE",headers:{...u}})).ok)await v();else{let c=a.filter(a=>a.id!==b);d(c),t(c)}},y=a=>{if("number"==typeof a)return a;let b=Number.parseFloat(a);return Number.isFinite(b)?b:0},z=(0,c.useMemo)(()=>a.reduce((a,b)=>a+y(b.quantity),0),[a]),A=a=>{let b=y(a.quantity),c=y(a.pricePerUnit);return b>0?b*c:c},B=(0,c.useMemo)(()=>a.reduce((a,b)=>a+A(b),0),[a]);return e?g?(0,b.jsx)("section",{id:"water-order",className:"section-padding-y bg-background",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto container-padding-x",children:(0,b.jsxs)("div",{className:"grid lg:grid-cols-2 gap-10",children:[(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-xl p-8 shadow-sm",children:[(0,b.jsxs)("div",{className:"space-y-1 mb-6",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-accent uppercase tracking-wide",children:"Warshada Qeybta Beeca"}),(0,b.jsx)("h2",{className:"heading-md text-primary",children:"Waxii Baxay"}),(0,b.jsx)("p",{className:"text-foreground/70 text-sm",children:"Geli badeecada, tirada, qiimaha iyo taariikhda dirista."}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{let b=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download="water-orders.json",d.click(),URL.revokeObjectURL(c)},className:"px-3 py-2 border border-slate-300 rounded-lg text-sm hover:bg-slate-50",children:"Export JSON"}),(0,b.jsx)("button",{type:"button",onClick:()=>{s.current?.click()},className:"px-3 py-2 border border-slate-300 rounded-lg text-sm hover:bg-slate-50",children:"Import JSON"}),(0,b.jsx)("input",{ref:s,type:"file",accept:"application/json",className:"hidden",onChange:a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=()=>{try{let a=JSON.parse(c.result);if(!Array.isArray(a))throw Error("Invalid");let b=a.map(a=>({id:a.id||Date.now().toString(),product:a.product||"",quantity:a.quantity??"",pricePerUnit:a.pricePerUnit??0,deliveryDate:a.deliveryDate||"",notes:a.notes||""}));d(b),t(b),alert("Import succeeded")}catch{alert("Import failed: invalid file")}},c.readAsText(b),a.target.value=""}})]})]}),(0,b.jsxs)("form",{onSubmit:w,className:"space-y-5",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Magaca sheeyga baxay"}),(0,b.jsx)("input",{value:i,onChange:a=>j(a.target.value),placeholder:"e.g. 5L Bottle, 19L Dispenser",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Imisa xabo (optional)"}),(0,b.jsx)("input",{value:k,onChange:a=>l(a.target.value),placeholder:"Tusaale: 10 xabo ama ka tag bannaan",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Qiimaha"}),(0,b.jsx)("input",{value:m,onChange:a=>n(a.target.value),placeholder:"Tusaale: 2.50",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"})]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Delivery Date (optional)"}),(0,b.jsx)("input",{type:"date",value:o,onChange:a=>p(a.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Notes (optional)"}),(0,b.jsx)("input",{value:q,onChange:a=>r(a.target.value),placeholder:"Special instructions",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-accent focus-border-transparent"})]})]}),(0,b.jsx)("button",{type:"submit",className:"w-full bg-accent hover:bg-accent/90 text-white font-semibold py-3 rounded-lg transition-colors",children:"Diiwaangeli"})]})]}),(0,b.jsxs)("div",{className:"bg-white border border-slate-200 rounded-xl p-8 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-accent uppercase tracking-wide",children:"Records"}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-primary",children:"Your Orders"})]}),(0,b.jsxs)("div",{className:"text-right space-y-1",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-foreground/60",children:"Total Quantity"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-accent",children:g?z:"--"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-foreground/60",children:"Total Revenue"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600",children:g?`$${B.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"--"})]})]})]}),0===a.length?(0,b.jsx)("p",{className:"text-foreground/50 text-center py-10",children:"No orders yet"}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-left",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,b.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Magaca sheeyga baxay"}),(0,b.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Imisa xabo"}),(0,b.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Qiimaha"}),(0,b.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Total"}),(0,b.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Delivery"}),(0,b.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Notes"}),g&&(0,b.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Action"})]})}),(0,b.jsx)("tbody",{children:a.map(a=>(0,b.jsxs)("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[(0,b.jsx)("td",{className:"py-3 px-4 text-slate-900 font-medium",children:a.product}),(0,b.jsx)("td",{className:"py-3 px-4 text-slate-900",children:a.quantity}),(0,b.jsxs)("td",{className:"py-3 px-4 text-slate-900",children:["$",y(a.pricePerUnit).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,b.jsx)("td",{className:"py-3 px-4 text-slate-900 font-bold text-green-600",children:A(a).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,b.jsx)("td",{className:"py-3 px-4 text-slate-900",children:a.deliveryDate?new Date(a.deliveryDate).toLocaleDateString():"-"}),(0,b.jsx)("td",{className:"py-3 px-4 text-slate-900",children:a.notes||"-"}),g&&(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)("button",{onClick:()=>x(a.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})})]},a.id))})]})})]})]})})}):null:(0,b.jsx)("section",{id:"water-order",className:"section-padding-y bg-background",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto container-padding-x",children:(0,b.jsx)("p",{className:"text-foreground/60",children:"Loading orders..."})})})}a.s(["WaterOrders",()=>d])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5f6a33ff._.js.map