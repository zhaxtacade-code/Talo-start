(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88605,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},59522,e=>{"use strict";var t=e.i(7426),a=e.i(8720);function s(){let[e,s]=(0,a.useState)([]),[r,l]=(0,a.useState)(!1),[i,n]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),[o,m]=(0,a.useState)(""),[x,u]=(0,a.useState)(""),[p,h]=(0,a.useState)(""),[g,b]=(0,a.useState)(""),f=(0,a.useRef)(null),y=e=>{localStorage.setItem("water_orders",JSON.stringify(e))};(0,a.useEffect)(()=>{n("true"===sessionStorage.getItem("admin_mode_water")),l(!0),N()},[]);let j=(0,a.useMemo)(()=>{let e=sessionStorage.getItem("admin_username")||"",t=sessionStorage.getItem("admin_password")||"";return e&&t?{"x-admin-username":e,"x-admin-password":t}:{}},[i]),N=async()=>{try{let e=await fetch("/api/water-orders");if(!e.ok)throw Error("api");let t=await e.json();s(t),y(t)}catch{s((()=>{let e=localStorage.getItem("water_orders");if(!e)return[];try{return JSON.parse(e)}catch{return[]}})())}},v=async t=>{if(t.preventDefault(),i&&c&&x){if((await fetch("/api/water-orders",{method:"POST",headers:{"Content-Type":"application/json",...j},body:JSON.stringify({product:c,quantity:o,pricePerUnit:x,deliveryDate:p,notes:g})})).ok)await N();else{let t=[...e,{id:Date.now().toString(),product:c,quantity:o,pricePerUnit:x,deliveryDate:p,notes:g}];s(t),y(t)}d(""),m(""),u(""),h(""),b("")}},w=async t=>{if(i)if((await fetch(`/api/water-orders/${t}`,{method:"DELETE",headers:{...j}})).ok)await N();else{let a=e.filter(e=>e.id!==t);s(a),y(a)}},S=e=>{if("number"==typeof e)return e;let t=Number.parseFloat(e);return Number.isFinite(t)?t:0},D=(0,a.useMemo)(()=>e.reduce((e,t)=>e+S(t.quantity),0),[e]),O=e=>{let t=S(e.quantity),a=S(e.pricePerUnit);return t>0?t*a:a},k=(0,a.useMemo)(()=>e.reduce((e,t)=>e+O(t),0),[e]);return r?i?(0,t.jsx)("section",{id:"water-order",className:"section-padding-y bg-background",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto container-padding-x",children:(0,t.jsxs)("div",{className:"grid lg:grid-cols-2 gap-10",children:[(0,t.jsxs)("div",{className:"bg-white border border-slate-200 rounded-xl p-8 shadow-sm",children:[(0,t.jsxs)("div",{className:"space-y-1 mb-6",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-accent uppercase tracking-wide",children:"Warshada Qeybta Beeca"}),(0,t.jsx)("h2",{className:"heading-md text-primary",children:"Waxii Baxay"}),(0,t.jsx)("p",{className:"text-foreground/70 text-sm",children:"Geli badeecada, tirada, qiimaha iyo taariikhda dirista."}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="water-orders.json",s.click(),URL.revokeObjectURL(a)},className:"px-3 py-2 border border-slate-300 rounded-lg text-sm hover:bg-slate-50",children:"Export JSON"}),(0,t.jsx)("button",{type:"button",onClick:()=>{f.current?.click()},className:"px-3 py-2 border border-slate-300 rounded-lg text-sm hover:bg-slate-50",children:"Import JSON"}),(0,t.jsx)("input",{ref:f,type:"file",accept:"application/json",className:"hidden",onChange:e=>{let t=e.target.files?.[0];if(!t)return;let a=new FileReader;a.onload=()=>{try{let e=JSON.parse(a.result);if(!Array.isArray(e))throw Error("Invalid");let t=e.map(e=>({id:e.id||Date.now().toString(),product:e.product||"",quantity:e.quantity??"",pricePerUnit:e.pricePerUnit??0,deliveryDate:e.deliveryDate||"",notes:e.notes||""}));s(t),y(t),alert("Import succeeded")}catch{alert("Import failed: invalid file")}},a.readAsText(t),e.target.value=""}})]})]}),(0,t.jsxs)("form",{onSubmit:v,className:"space-y-5",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Magaca sheeyga baxay"}),(0,t.jsx)("input",{value:c,onChange:e=>d(e.target.value),placeholder:"e.g. 5L Bottle, 19L Dispenser",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Imisa xabo (optional)"}),(0,t.jsx)("input",{value:o,onChange:e=>m(e.target.value),placeholder:"Tusaale: 10 xabo ama ka tag bannaan",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Qiimaha"}),(0,t.jsx)("input",{value:x,onChange:e=>u(e.target.value),placeholder:"Tusaale: 2.50",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Delivery Date (optional)"}),(0,t.jsx)("input",{type:"date",value:p,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-slate-700",children:"Notes (optional)"}),(0,t.jsx)("input",{value:g,onChange:e=>b(e.target.value),placeholder:"Special instructions",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-accent focus-border-transparent"})]})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-accent hover:bg-accent/90 text-white font-semibold py-3 rounded-lg transition-colors",children:"Diiwaangeli"})]})]}),(0,t.jsxs)("div",{className:"bg-white border border-slate-200 rounded-xl p-8 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-accent uppercase tracking-wide",children:"Records"}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-primary",children:"Your Orders"})]}),(0,t.jsxs)("div",{className:"text-right space-y-1",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-foreground/60",children:"Total Quantity"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-accent",children:i?D:"--"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-foreground/60",children:"Total Revenue"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:i?`$${k.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"--"})]})]})]}),0===e.length?(0,t.jsx)("p",{className:"text-foreground/50 text-center py-10",children:"No orders yet"}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,t.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Magaca sheeyga baxay"}),(0,t.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Imisa xabo"}),(0,t.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Qiimaha"}),(0,t.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Total"}),(0,t.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Delivery"}),(0,t.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Notes"}),i&&(0,t.jsx)("th",{className:"py-3 px-4 text-sm font-medium text-slate-700",children:"Action"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[(0,t.jsx)("td",{className:"py-3 px-4 text-slate-900 font-medium",children:e.product}),(0,t.jsx)("td",{className:"py-3 px-4 text-slate-900",children:e.quantity}),(0,t.jsxs)("td",{className:"py-3 px-4 text-slate-900",children:["$",S(e.pricePerUnit).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,t.jsx)("td",{className:"py-3 px-4 text-slate-900 font-bold text-green-600",children:O(e).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),(0,t.jsx)("td",{className:"py-3 px-4 text-slate-900",children:e.deliveryDate?new Date(e.deliveryDate).toLocaleDateString():"-"}),(0,t.jsx)("td",{className:"py-3 px-4 text-slate-900",children:e.notes||"-"}),i&&(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsx)("button",{onClick:()=>w(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Delete"})})]},e.id))})]})})]})]})})}):null:(0,t.jsx)("section",{id:"water-order",className:"section-padding-y bg-background",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto container-padding-x",children:(0,t.jsx)("p",{className:"text-foreground/60",children:"Loading orders..."})})})}e.s(["WaterOrders",()=>s])}]);